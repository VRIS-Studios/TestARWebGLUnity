<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>Unity WebGL Build</title>
    <link rel="stylesheet" href="TemplateData/style.css">
    <script>
      async function requestCameraAccess() {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ video: true });
          console.log("Camera access granted");
        } catch (err) {
          console.error("Camera access denied:", err);
          alert("Camera access is required for the AR experience.");
        }
      }

      window.onload = () => {
        requestCameraAccess().then(() => {
          var canvas = document.querySelector("#unity-canvas");
          var script = document.createElement("script");
          script.src = "Build/WebGL.loader.js";
          script.onload = () => {
            createUnityInstance(canvas, {
              dataUrl: "Build/WebGL.data.unityweb",
              frameworkUrl: "Build/WebGL.framework.js.unityweb",
              codeUrl: "Build/WebGL.wasm.unityweb",
              streamingAssetsUrl: "StreamingAssets",
              companyName: "DefaultCompany",
              productName: "UnityAR",
              productVersion: "1.0",
            }).then((unityInstance) => {
              console.log("Unity instance created");
            }).catch((err) => {
              console.error("Unity initialization failed", err);
            });
          };
          document.body.appendChild(script);
        });
      };
    </script>
  </head>
  <body>
    <div id="unity-container" class="unity-desktop">
      <canvas id="unity-canvas" style="width: 960px; height: 600px;"></canvas>
      <div id="unity-loading-bar">
        <div id="unity-logo"></div>
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
    </div>
  </body>
</html>
